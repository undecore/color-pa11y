<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A color blindness friendly CSS color palette library with a11y patterns. | Color Pa11y</title>
    <link rel="stylesheet" href="./css/main.css" media="screen">
  </head>
  <body class="pa11y yellow" onscroll="updateColorSection()">
    <section id="cover">
      <figure>
        <img class="logo" src="./assets/pa11y.svg" alt="friendly logo with a colorfull popsicle character with meme sunglasses on the face">
      </figure>
      <header tabindex="0">
        <h1>Color-Pa11y</h1>
        <h2>A color blindness friendly CSS color palette library with a11y patterns.</h2>
        <p>made with ♥︎ by <a href="https://hygorbudny.com/"><strong>hygor</strong></a></p>
      </header>
    </section>

    <!-- <nav id="main-navigation">
      <ul>
        <li>
          <a tabindex="1" class="pa11y yellow" href="#about" title="solution found">About</a>
        </li>
        <li>
          <a tabindex="2" class="pa11y orange" href="#usage" title="how to use">Usage</a>
        </li>
        <li>
          <a tabindex="3" class="pa11y green" href="#colors" title="colours section">Colours</a>
        </li>
        <li>
          <a tabindex="4" class="pa11y blue" href="#frameworks" title="back to beginning">Frameworks</a>
        </li>
        <li>
          <a tabindex="5" class="pa11y violet" href="#plugins" title="colours section">Plugins</a>
        </li>
      </ul>
    </nav> -->

    <section tabindex="6" id="about">
      <div class="container">
        <header>
          <h2>About</h2>
        </header>
        <div class="content">
          <p>A ideia por trás do projeto é dar às pessoas com dificuldade visual cromática a possibilidade de perceber e entender as cores através de texturas visuais.</p>
          <p>Utilizando os conceitos de vibração e comprimentos de ondas, foram criadas 7 texturas diferentes, uma para cada região do spectro cromático, vulgarmente conhecidas como cores do arco-íris.</p>
          <p>Para cada cor primária do círculo cromático, uma textura diferente é aplicada. Cores secundárias, terão sobreposição de texturas.</p>
        </div>
      </div>
    </section>

    <section tabindex="7" id="usage">
      <div class="container">
        <header>
          <h2>Usage</h2>
        </header>
        <div class="content">
          <!--
          <p>Para utilizar o color-pa11y, basta adicionar o arquivo CSS no seu projeto e sair utilizando.</p>
          <h3>Instalando via NPM</h3>
          <p>Você pode instalar o pacote via npm / pnpm / yarn ou através de um CDN:</p>
          <code>npm i color-pa11y</code>
          <p>ou</p>
          <code>&lt;link rel="stylesheet" href="//undeco.re/color-pa11y/pa11y.css" /&gt;</code>
          <h3>Aplicando os estilos</h3>
          <p>Para aplicar o background em qualquer elemento, basta aplicar as seguintes classes no elemento desejado:</p>
          <code>&lt;div class="pa11y <u>yellow</u>"&gt;&lt;/div&gt;</code>
          -->
          <p>To make color-pa11y available in your project, you just need to include the pa11y's CSS in your project.</p>
          <h3>Instaling</h3>
          <p>You can install it by npm / pnpm / yarn or CDN:</p>
          <code>npm i color-pa11y</code>
          <p>or</p>
          <code>&lt;link rel="stylesheet" href="//undeco.re/color-pa11y/pa11y.css" /&gt;</code>
          <h3>Applying styles</h3>
          <p>To make the magic happen, you just need to apply those classes inside the element you like.</p>
          <code>&lt;div class="pa11y <u>yellow</u>"&gt;&lt;/div&gt;</code>
        </div>
      </div>
    </section>

    <section tabindex="8" id="colors">
      <div class="container">
        <header>
          <h2>Default Colors</h2>
        </header>
        <div class="content">
          <!-- <p>Por padrão, serão aplicadas as cores de fundo a todos os elemento que tiverem a classe <span class="code">.pa11y</span> seguido das seguintes classes de cores:</p> -->
          <p>By default, the background colors are applied for all element who has the class <span class="code">.pa11y</span> and any color bellow:</p>
          <div class="rainbow">
            <div class="pa11y red"><pre>.red</pre></div>
            <div class="pa11y orange"><pre>.orange</pre></div>
            <div class="pa11y yellow"><pre>.yellow</pre></div>
            <div class="pa11y green"><pre>.green</pre></div>
            <div class="pa11y blue"><pre>.blue</pre></div>
            <div class="pa11y purple"><pre>.purple</pre></div>
            <div class="pa11y violet"><pre>.violet</pre></div>
          </div>
        </div>
      </div>
    </section>

    <section tabindex="9" id="frameworks">
      <div class="container">
        <header>
          <h2>Frameworks</h2>
        </header>
        <div class="content">
          <p>...TODO!</p>
        </div>
      </div>
    </section>

    <section tabindex="10" id="plugins">
      <div class="container">
        <header>
          <h2>Plugins</h2>
        </header>
        <div class="content">
          <p>...TODO!</p>
        </div>
      </div>
    </section>

    <script>
      const { hash } = window.location;
      const { body } = document;
      const { classList: bodyClass } = body;

      window.addEventListener('onscroll', updateColorSection );

      function updateColorSection() {
        const sections = document.querySelectorAll('section');
        sections.forEach( (section, index) => {
          const isVisible = inViewport(section);
          if (!isVisible) return;
          const clientY = document.documentElement.scrollTop;
          const sectionY = section.offsetTop - 32;
          if ( isVisible && (clientY <= sectionY) ) {
            setBodyColor(index);
          }
        });
      }

      function inViewport (el) {
        var r, html;
        if ( !el || 1 !== el.nodeType ) { return false; }
        html = document.documentElement;
        r = el.getBoundingClientRect();
        return ( !!r
          && r.bottom >= 0
          && r.right >= 0
          && r.top <= html.clientHeight
          && r.left <= html.clientWidth
        );
      }

      function setBodyColor(index) {
        switch (index) {
          case 1:
            bodyClass.value = 'pa11y yellow';
            break;
          case 2:
            bodyClass.value = 'pa11y orange';
            break;
          case 3:
            bodyClass.value = 'pa11y green';
            break;
          case 4:
            bodyClass.value = 'pa11y blue';
            break;
          case 5:
            bodyClass.value = 'pa11y violet';
            break;
          default:
            bodyClass.value = 'pa11y yellow';
            break;
        }
      }

      function scrollToHash(hash) {
        setTimeout( () =>  {
          document.querySelector(hash).scrollIntoView({
            behavior: 'smooth',
            block: 'center'
          });
        }, 100);
      }

      if ( hash ) scrollToHash(hash);

    </script>
  </body>
</html>
